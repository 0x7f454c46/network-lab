service integrated-vtysh-config
frr defaults datacenter
log syslog

{% for iface in neighbors.split(",") if neighbors %}
interface {{ iface }}
  no ipv6 nd suppress-ra
  ipv6 nd ra-interval 3
!
{% endfor %}
{% for iface in fabric.split(",") if fabric %}
interface {{ iface }}
  no ipv6 nd suppress-ra
  ipv6 nd ra-interval 3
!
{% endfor %}
router bgp {{ asn }}
 bgp router-id {{ loopback }}
 network {{ loopback }}/32
 maximum-paths 64
 bgp bestpath as-path multipath-relax
 bgp bestpath compare-routerid
 neighbor fabric peer-group
 neighbor fabric description Internal Fabric Network
 neighbor fabric capability extended-nexthop
 neighbor fabric advertisement-interval 0
 neighbor fabric timers 1 3
 neighbor fabric timers connect 3
 neighbor fabric remote-as external
{% for iface in neighbors.split(",") if neighbors %}
 neighbor {{ iface }} interface
 neighbor {{ iface }} peer-group fabric
{% endfor %}
{% for iface in fabric.split(",") if fabric %}
 neighbor {{ iface }} interface v6only
 neighbor {{ iface }} peer-group fabric
{% endfor %}
 !
 address-family ipv6 unicast
  neighbor fabric activate
 exit-address-family
!
